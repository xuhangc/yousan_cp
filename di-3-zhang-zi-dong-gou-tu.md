# 第3章 自动构图

构图是摄影最基础的技能之一，使用不同的构图方法往往会得到效果差异很大的作品。本章讲述摄影中的构图，尤其是自动
构图算法。

- 构图基础
- 自动构图的研究方法
- 实时自动构图算法实战

## 3.1 构图基础

### 3.1.1 构图的基本概念

构图来源于绘画，最初指绘画时根据题材和主题思想的要求，把要表现的形象适当地组织起来，构成一个协调的、完整的画
面。因此，一种构图方法一定要能够表达作品的核心思想内容，并有一定的艺术感染力。

### 3.1.2 构图的应用场景

3.1.1小节展示了笔者后期构图的一些摄影案例，而对于互联网上的海量图像，也有自动构图的需求，构图的应用不仅限于摄
影中，下面进行详细介绍。

1. 构图推荐

学习基本的构图方法虽然很简单，但是也需要大量时间练习，对于学习能力较差或者对新事物接受较慢的人来说，这依然是
一个难题。

目前，Sony相机和一些摄影类软件产品会提供一个九宫格来辅助拍摄者进行构图。如果有一款产品能够在拍摄时指导拍摄
者进行前后左右移动，相信会非常实用和受欢迎。

2. 图像重匹配

很多时候，我们需要将一张图像放到一个尺寸与其不匹配的地方，如将使用相机拍摄的照片放置到各种移动设备中，这需要
改变分辨率、高宽比等，这被叫作图像重匹配(Image Retargeting)。

在图像重匹配的时候，我们会考虑两个重要因素：

(1) 原始图像的重要信息必须被保留，主体不能被裁剪;

(2) 要保存原始图像的结构信息，如构图风格，并且尽量保证目标比例。

对于各种图像重匹配方法的比较，读者可以参考相关综述文章。并没有一种方法对所有的图都是适用的，但是大部分情
况下人们对图像变形比较敏感，尤其是人像、有良好对称性的图像等，此时人们愿意牺牲内容也不愿意图像变形扭曲。

3. 缩略图生成

缩略图即缩小尺寸的图像。缩略图通常在互联网网页中为图像提供与普通文本索引相同的功能。缩略图的生成可以看作是图像重匹配的一种，如今在摄影类App和视频类App中都广泛应用封面缩略图。

### 3.1.3 显著目标数据集

在构图的研究方法中，有一类研究方法是基于显著图的。显著图就是一个像素值为0~1的概率图，其中亮度越大，代表该处
的信息越重要，通常就是目标所在的位置。

有了显著图后，就可以基于显著图进行裁剪。如果将显著图的所有像素值的和当作能量，那么设定一个阈值就可以裁剪出包
括一定能量的最小外接矩形图。

当前有许多的显著目标数据集，我们主要介绍其中的MIT300数据集、CAT2000数据集、SALICON数据集。

1. MIT300数据集
2. CAT2000数据集
3. SALICON数据集

除了上述数据集外，现有的显著目标数据集还包括MIT数据集、EyeTrackUAV数据集、DHF1K数据集、EMOd数据集、
FIGRIM Fixation数据集、Coutrot数据集、SAVAM数据集、EyeCrowd数据集、FiWl数据集、OSIE数据集、VIP数据集、MIT低分辨率数据集、KTH Koostra数据集、NUSEF数据集、TUD图像质量数据集、Ehinger数据集、DOVES数据集、VAIQ数据集、Toronto数据集、FiFA数据集等。

### 3.1.4 构图数据集

喜欢图像处理和摄影的研究人员在很久以前就开始研究自动构图问题了，提出了一些标准数据集，下面简单介绍。

1. CUHK Cropping数据集
2. Flickr Cropping数据集
3. CPCD数据集

从构图数据集的标注可以看出，更多数据集采用了相对构图，因为人们更容易比较两张图的构图美感，而不是直接获取最
好的构图结果。